<ion-content [fullscreen]="true" class="setup-content">
  <div class="setup-container">
    <!-- Header Section -->
    <div class="header-section">
      <ion-button 
        fill="clear" 
        class="back-btn"
        (click)="goBack()">
        <ion-icon name="chevron-back" slot="icon-only"></ion-icon>
      </ion-button>
      
      <div class="header-content">
        <h1 class="page-title">Jogadores</h1>
        <p class="page-subtitle">Adicione de 4 a 8 jogadores para come√ßar</p>
      </div>
    </div>

    <!-- Add Player Section -->
    <div class="add-player-section">
      <div class="input-container">
        <div class="input-wrapper">
          <input 
            type="text"
            class="player-input"
            [(ngModel)]="newPlayerName"
            placeholder="Nome do jogador"
            maxlength="20"
            (keyup.enter)="addPlayer()"
            #nameInput>
          <span class="input-highlight"></span>
        </div>
        
        <ion-button 
          class="add-btn"
          [disabled]="!isValidPlayerName()"
          (click)="addPlayer()">
          <ion-icon name="add" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
      
      <div class="requirements-text" *ngIf="players.length < 4">
        Faltam {{ 4 - players.length }} jogador(es)
      </div>
    </div>

    <!-- Players Grid -->
    <div class="players-section" *ngIf="players.length > 0">
      <div class="players-counter">
        <span class="counter-text">{{ players.length }}/8</span>
      </div>
      
      <div class="players-grid">
        <div 
          *ngFor="let player of players; trackBy: trackByPlayerId"
          class="player-card"
          [style.border-color]="player.color">
          <div class="player-content">
            <div class="player-avatar" [style.background-color]="player.color">
              {{ player.avatar }}
            </div>
            <span class="player-name">{{ player.name }}</span>
          </div>
          
          <ion-button 
            fill="clear" 
            size="small"
            class="remove-btn"
            (click)="removePlayer(player.id)">
            <ion-icon name="close" slot="icon-only"></ion-icon>
          </ion-button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="players.length === 0">
      <div class="empty-icon">üë•</div>
      <h3>Nenhum jogador ainda</h3>
      <p>Adicione jogadores para come√ßar a divers√£o</p>
    </div>

    <!-- Continue Button -->
    <div class="continue-section">
      <ion-button 
        expand="full"
        class="continue-btn"
        [disabled]="players.length < 4"
        (click)="proceedToConfessions()">
        <span *ngIf="players.length >= 4">Continuar</span>
        <span *ngIf="players.length < 4">{{ players.length }}/4 m√≠nimo</span>
        <ion-icon name="arrow-forward" slot="end" *ngIf="players.length >= 4"></ion-icon>
      </ion-button>
    </div>
  </div>

  <!-- Toast de erro -->
  <ion-toast
    [isOpen]="showErrorToast"
    [message]="errorMessage"
    duration="3000"
    color="danger"
    position="top"
    (didDismiss)="showErrorToast = false">
  </ion-toast>
</ion-content>